"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[712],{5712:(ut,_,a)=>{a.r(_),a.d(_,{UserModule:()=>ct});var p=a(2305);class k{constructor(i,e){this.idUserFollowing=i,this.idUserFollowed=e}}var t=a(7716),C=a(4946),x=a(7446),I=a(1707),g=a(7574);class T{constructor(i,e,o){this.idFollow=i,this.idUserFollowing=e,this.idUserFollowed=o}}var G=a(1326),S=a(1841);class v{constructor(i,e,o,l){this.idFollow=i,this.idUserFollowing=e,this.idUserFollowed=o,this.userInfo=l}}let w=(()=>{class n{constructor(e){this.http=e,this._url=G.z.HOST+"follows/"}getUsersFollowedByUserId(e){return new g.y(o=>{this.http.get(this._url+"following/"+e).subscribe(l=>{const s=[];for(const r of l){const c=new v(r.idFollow,r.idUserFollowing,r.idUserFollowed,r.followedUser);s.push(c)}o.next(s),o.complete()},l=>{o.error(l),o.complete()})})}getUserFollowingByUserId(e){return new g.y(o=>{this.http.get(this._url+"followed/"+e).subscribe(l=>{const s=[];for(const r of l){const c=new v(r.idFollow,r.idUserFollowing,r.idUserFollowed,r.followingUser);s.push(c)}o.next(s),o.complete()},l=>{o.error(l),o.complete()})})}getIdFollowByUserFollowingAndUserFollowed(e,o){return new g.y(l=>{this.http.get(this._url+"?idUserFollowing="+e+"&idUserFollowed="+o).subscribe(s=>{const r=new T(s.id,s.idUserFollowing,s.idUserFollowed);l.next(r),l.complete()},s=>{l.error(s),l.complete()})})}addFollow(e){return new g.y(o=>{this.http.post(this._url,e).subscribe(l=>{const s=new T(l.idFollow,l.idUserFollowing,l.idUserFollowed);console.log(s),o.next(s),o.complete()},l=>{o.error(l),o.complete()})})}removeFollow(e){return new g.y(o=>{this.http.delete(this._url+e).subscribe(l=>{o.next(l),o.complete()},l=>{o.error(l),o.complete()})})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(S.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var u=a(3738),m=a(8583),U=a(5939),y=a(1095),O=a(2072),P=a(6627),q=a(8349),Z=a(6923),f=a(3679);function J(n,i){1&n&&t._uU(0,"Suivi")}function N(n,i){1&n&&t._uU(0,"Suivre")}const E=function(n,i){return{follow:n,notFollow:i}};function D(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().setIsFollowed()}),t.YNc(1,J,1,0,"ng-template",12),t.YNc(2,N,1,0,"ng-template",null,13,t.W1O),t.qZA()}if(2&n){const e=t.MAs(3),o=t.oxw();t.Q6J("ngClass",t.WLB(3,E,o.isFollowed,!o.isFollowed)),t.xp6(1),t.Q6J("ngIf",o.isFollowed)("ngIfElse",e)}}function V(n,i){if(1&n&&(t.TgZ(0,"ul"),t.TgZ(1,"li"),t._uU(2),t.qZA(),t.qZA()),2&n){const e=i.$implicit;t.xp6(2),t.Oqu(e.userInfo.firstName)}}function Q(n,i){if(1&n&&(t.TgZ(0,"ul"),t.TgZ(1,"li"),t._uU(2),t.qZA(),t.qZA()),2&n){const e=i.$implicit;t.xp6(2),t.Oqu(e.userInfo.firstName)}}function R(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",20),t.TgZ(2,"ngx-monaco-editor",21),t.NdJ("ngModelChange",function(l){return t.CHM(e),t.oxw().$implicit.code.content=l}),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(2),t.Q6J("options",o.editorOptions)("ngModel",e.code.content)}}function Y(n,i){if(1&n&&(t.TgZ(0,"mat-card-content"),t._UZ(1,"p",22),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("innerHTML",e.text.content,t.oJD)}}function L(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.numberOfRemarks," ")}}const j=function(n){return["/remark-post/",n]};function H(n,i){if(1&n&&(t.TgZ(0,"ul"),t.TgZ(1,"li"),t.TgZ(2,"mat-card"),t.TgZ(3,"div"),t.TgZ(4,"ul",14),t.TgZ(5,"li"),t.TgZ(6,"mat-card-subtitle"),t._uU(7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"mat-card-header"),t.TgZ(9,"mat-card-subtitle"),t._uU(10),t.qZA(),t.TgZ(11,"mat-card-title"),t.TgZ(12,"h5"),t._uU(13),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",15),t.YNc(15,R,3,2,"div",10),t.YNc(16,Y,2,1,"mat-card-content",10),t.qZA(),t.TgZ(17,"mat-card-footer",16),t.TgZ(18,"ul",17),t.TgZ(19,"li"),t._UZ(20,"app-like",18),t.qZA(),t.TgZ(21,"li"),t.YNc(22,L,2,1,"ng-template",5),t.TgZ(23,"a",19),t.TgZ(24,"mat-icon"),t._uU(25," mode_comment"),t.qZA(),t._uU(26," Commentaires "),t.qZA(),t.qZA(),t.TgZ(27,"li"),t._UZ(28,"app-share-post"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){const e=i.$implicit;t.xp6(7),t.hij(" ",e.user.firstName," "),t.xp6(3),t.hij("",e.createdDate," "),t.xp6(3),t.hij(" ",e.title,""),t.xp6(2),t.Q6J("ngIf",null!==e.code),t.xp6(1),t.Q6J("ngIf",null!==e.text),t.xp6(4),t.Q6J("post",e),t.xp6(2),t.Q6J("ngIf",e.numberOfRemarks>0),t.xp6(1),t.Q6J("routerLink",t.VKq(8,j,e.idPost))}}function $(n,i){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,H,29,10,"ul",8),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.posts)}}const z=[{path:"profile/:idUser",component:(()=>{class n{constructor(e,o,l,s,r){this._jwtTokenService=e,this._userService=o,this._postService=l,this._followService=s,this.route=r,this.isFollowed=!1,this.idUserToGet=Number(this.route.snapshot.paramMap.get("idUser")),this.currentUser=Number(this._jwtTokenService.getIdUser())}ngOnInit(){this.checkIfUserOnPageIsFollowedByCurrentUser(),this.getUsersFollowedByCurrentUser(),this.getUsersFollowingCurrentUser(),this.getUserById(),this.getPostsByIdUser(this.idUserToGet),this.editorOptions={readOnly:!0,theme:"vs-dark",language:"java",automaticLayout:!0}}getUserById(){this._userService.getUserByID(this.idUserToGet).subscribe(e=>{this.user=e})}setIsFollowed(){this.isFollowed=!this.isFollowed,this.isFollowed?this.addFollow():this.removeFollow()}checkIfUserOnPageIsFollowedByCurrentUser(){this._followService.getIdFollowByUserFollowingAndUserFollowed(this.currentUser,this.idUserToGet).subscribe(e=>{e.idUserFollowing==this.currentUser&&(this.isFollowed=!0,this.idFollow=e.idFollow)})}addFollow(){let e=new k(this.currentUser,this.idUserToGet);this._followService.addFollow(e).subscribe()}getUsersFollowedByCurrentUser(){this._followService.getUsersFollowedByUserId(this.idUserToGet).subscribe(e=>{this.followedUsers=e})}getUsersFollowingCurrentUser(){this._followService.getUserFollowingByUserId(this.idUserToGet).subscribe(e=>{this.followingUsers=e})}removeFollow(){this._followService.removeFollow(this.idFollow).subscribe()}getPostsByIdUser(e){this._postService.getPostsByUserId(e).subscribe(o=>{this.posts=o})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.V),t.Y36(x.K),t.Y36(I.L),t.Y36(w),t.Y36(p.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-profile"]],decls:24,vars:8,consts:[[1,"container","d-flex","align-items-center","justify-content-center"],[1,"card-body","pt-0","pt-md-4"],[1,"text-center"],["alt","","src","https://yzgeneration.com/wp-content/uploads/2019/05/One-Punch-Man-Tome-15-Cover.jpg",1,"avatar",2,"max-height","100px"],[1,"center"],[3,"ngIf"],["dynamicHeight","",1,"center"],[3,"label"],[4,"ngFor","ngForOf"],[1,"container","d-flex","align-items-center","justify-content-center",2,"margin-top","20px"],[4,"ngIf"],["type","submit","mat-raised-button","","color","white",3,"ngClass","click"],[3,"ngIf","ngIfElse"],["notFollowed",""],[1,"container","d-flex","align-items-center","justify-content-between"],[2,"margin-left","15px"],[2,"padding-bottom","5px"],[1,"d-flex","justify-content-sm-around"],[3,"post"],["mat-button","",3,"routerLink"],[2,"width","600px","height","200px"],[2,"width","100%","height","100%",3,"options","ngModel","ngModelChange"],[3,"innerHTML"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"div",2),t._UZ(4,"img",3),t.TgZ(5,"h3"),t._uU(6),t.qZA(),t._UZ(7,"br"),t.TgZ(8,"div",4),t.YNc(9,D,4,6,"ng-template",5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div"),t.TgZ(11,"mat-card"),t.TgZ(12,"mat-card-header",4),t.TgZ(13,"mat-card-title"),t.TgZ(14,"h5"),t._uU(15,"Mes relations : "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"mat-tab-group",6),t.TgZ(17,"mat-tab",7),t.YNc(18,V,3,1,"ul",8),t.qZA(),t.TgZ(19,"mat-tab",7),t.YNc(20,Q,3,1,"ul",8),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(21,"br"),t.TgZ(22,"div",9),t.YNc(23,$,2,1,"div",10),t.qZA()),2&e&&(t.xp6(6),t.AsE(" ",o.user.firstName," ",o.user.lastName," "),t.xp6(3),t.Q6J("ngIf",o.currentUser!=o.idUserToGet),t.xp6(8),t.MGl("label","abonn\xe9 :  ",o.followingUsers.length,""),t.xp6(1),t.Q6J("ngForOf",o.followingUsers),t.xp6(1),t.MGl("label","abonnement : ",o.followedUsers.length,""),t.xp6(1),t.Q6J("ngForOf",o.followedUsers),t.xp6(3),t.Q6J("ngIf",o.posts&&o.posts.length>0))},directives:[u.a8,m.O5,u.dk,u.n5,U.SP,U.uX,m.sg,y.lW,m.mk,u.$j,u.rt,O.F,y.zs,p.yS,P.Hw,q.C,Z.PG,f.JJ,f.On,u.dn],styles:["img[_ngcontent-%COMP%]{clip-path:circle()}.follow[_ngcontent-%COMP%]{color:green}.notFollow[_ngcontent-%COMP%]{color:red}ul[_ngcontent-%COMP%]{list-style:none}a[_ngcontent-%COMP%]:hover{color:#673ab4}"]}),n})()}];let K=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[p.Bz.forChild(z)],p.Bz]}),n})();var W=a(4466),X=a(1318),h=(a(9490),a(8345),a(2458));a(4765);let rt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[h.BQ,h.si],h.BQ]}),n})(),ct=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[w],imports:[[W.m,K,Z.nm,X.PostModule,rt]]}),n})()}}]);